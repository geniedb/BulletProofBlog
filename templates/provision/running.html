{% extends "base.html" %}
{% load staticfiles %}

{% block headextra %}
<script type="text/javascript">
function handleJson(info) {
	$("#"+info.node_id+"icon").addClass("server" + (info.status==0 ? "On" : "Off"));
	$("#"+info.node_id+"icon").removeClass("server" + (info.status==0 ? "Off" : "On"));
	$("#"+info.node_id+"connection").addClass("server" + info.node_id + (info.status==0 ? "On" : "Off"));
	$("#"+info.node_id+"connection").removeClass("server" + info.node_id + (info.status==0 ? "Off" : "On"));
	$("#"+(info.status==0 ? "stop_" : "start_") +info.node_id).show();
	$("#"+(info.status==0 ? "start_" : "stop_") +info.node_id).hide();
}

$(function () {
    $("#start_0").on("click", function (e) {
		$("#start_0").hide();
		$("#processingAnimation0").show();
    });
    $("#stop_0").on("click", function (e) {
		$("#stop_0").hide();
		$("#processingAnimation0").show();
    });
    $("#start_1").on("click", function (e) {
		$("#start_1").hide();
		$("#processingAnimation1").show();
    });
    $("#stop_1").on("click", function (e) {
		$("#stop_1").hide();
		$("#processingAnimation1").show();
    });
});

function requestUpdates() {
	$.getJSON('0/',{format:'json'},handleJson);
	$.getJSON('1/',{format:'json'},handleJson);
}

$(document).ready(function() {
	window.setInterval(requestUpdates, 10000);
	requestUpdates();
	$("#start_0").hide();
	$("#start_1").hide();
});
</script>
{% endblock %}
{% block content %}
<div id="callToAction"></div>
<div class="runningServers">
<table>
<tr>
	<td class="serverLabel" valign="top">
		<div id="0icon" class="serverOn"></div>
		Los Angeles, CA
	</td>
	<td>
		<div class="syncComplete"></div>
	</td>
	<td>
		<div id="1icon" class="serverOn"></div>
		<td class="serverLabel" valign="top">
		<br/>
		<br/>
		New York, NY
	</td>
</tr>
<tr>
	<td>
		<form method="post" action="0/">
		{% csrf_token %}
			<div id="controlBackground">
				<div id="processingAnimation0">
				<div id="processingAnimation">
				<div class="blockG" id="rotateG_01">		</div>
				<div class="blockG" id="rotateG_02">		</div>
				<div class="blockG" id="rotateG_03">		</div>
				<div class="blockG" id="rotateG_04">		</div>
				<div class="blockG" id="rotateG_05">		</div>
				<div class="blockG" id="rotateG_06">		</div>
				<div class="blockG" id="rotateG_07">		</div>
				<div class="blockG" id="rotateG_08">		</div>
				</div>	
			</div>	
				<button type="submit" id="start_0" class="start" name="action" value="start"></button>
				<button type="submit" id="stop_0" class="stop"  name="action" value="stop"></button>
			</div>
			<br />
			<img src="{% static "images/Icon_Eye.png" %}"/>
			<a id="0link" class="externalLink" target="_blank" href="http://{{nodes.0.dns}}/">Open External View</a>
		</form>
	</td>
	<td>
		<div id="0connection" class="server0On"></div>
		<div id="1connection" class="server1On"></div>
	</td>
	<td>
		<form method="post" action="1/" >
		{% csrf_token %}
			<div id="controlBackground">
					<div id="processingAnimation1">
						<div id="processingAnimation">
			<div class="blockG" id="rotateG_01">		</div>
			<div class="blockG" id="rotateG_02">		</div>
			<div class="blockG" id="rotateG_03">		</div>
			<div class="blockG" id="rotateG_04">		</div>
			<div class="blockG" id="rotateG_05">		</div>
			<div class="blockG" id="rotateG_06">		</div>
			<div class="blockG" id="rotateG_07">		</div>
			<div class="blockG" id="rotateG_08">		</div>
			</div>
		</div>
				<button type="submit" id="start_1" class="start" name="action" value="start"></button>
				<button type="submit" id="stop_1" class="stop"  name="action" value="stop"></button>
			</div>
			<br />
			<img src="{% static "images/Icon_Eye.png" %}"/>
			<a id="1link" class="externalLink" target="_blank" href="http://{{nodes.1.dns}}/">Open External View</a>
		</form>
	</td>
</tr>
</table>

</div>
<a id="bplink" target="_blank" href="http://{{demo.get_dns}}/"><h2>Bullet Proof Blog</h2></a>

{% endblock %}
